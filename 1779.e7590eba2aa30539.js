"use strict";(self.webpackChunkc8y_os_repo_overview=self.webpackChunkc8y_os_repo_overview||[]).push([[1779],{92834:(e,t,n)=>{n.d(t,{B:()=>a});var s=n(25092),r=n(72581);const i=(0,n(13258).L)((e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));var o=n(71925),l=n(86929);class a extends s.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const t=new c(this,this);return t.operator=e,t}_throwIfClosed(){if(this.closed)throw new i}next(e){(0,l.Y)((()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const t of this.currentObservers)t.next(e)}}))}error(e){(0,l.Y)((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:t}=this;for(;t.length;)t.shift().error(e)}}))}complete(){(0,l.Y)((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:t,isStopped:n,observers:s}=this;return t||n?r.Kn:(this.currentObservers=null,s.push(e),new r.yU((()=>{this.currentObservers=null,(0,o.o)(s,e)})))}_checkFinalizedStatuses(e){const{hasError:t,thrownError:n,isStopped:s}=this;t?e.error(n):s&&e.complete()}asObservable(){const e=new s.c;return e.source=this,e}}a.create=(e,t)=>new c(e,t);class c extends a{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:r.Kn}}},73113:(e,t,n)=>{n.d(t,{x:()=>o});var s=n(13188);var r=n(4285),i=n(92234);function o(...e){return(0,s.U)(1)((0,i.H)(e,(0,r.lI)(e)))}},87666:(e,t,n)=>{n.d(t,{I:()=>i,w:()=>r});var s=n(25092);const r=new s.c((e=>e.complete()));function i(e){return e?function(e){return new s.c((t=>e.schedule((()=>t.complete()))))}(e):r}},92234:(e,t,n)=>{n.d(t,{H:()=>C});var s=n(90975),r=n(66558),i=n(86005);function o(e,t=0){return(0,i.N)(((n,s)=>{s.add(e.schedule((()=>n.subscribe(s)),t))}))}var l=n(25092);var a=n(98914),c=n(20400),d=n(89220);function u(e,t){if(!e)throw new Error("Iterable cannot be null");return new l.c((n=>{(0,d.N)(n,t,(()=>{const s=e[Symbol.asyncIterator]();(0,d.N)(n,t,(()=>{s.next().then((e=>{e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}var f=n(198),h=n(23639),p=n(6576),m=n(46490),g=n(72544),y=n(9500),v=n(54311);function b(e,t){if(null!=e){if((0,f.l)(e))return function(e,t){return(0,s.Tg)(e).pipe(o(t),(0,r.Q)(t))}(e,t);if((0,p.X)(e))return function(e,t){return new l.c((n=>{let s=0;return t.schedule((function(){s===e.length?n.complete():(n.next(e[s++]),n.closed||this.schedule())}))}))}(e,t);if((0,h.y)(e))return function(e,t){return(0,s.Tg)(e).pipe(o(t),(0,r.Q)(t))}(e,t);if((0,g.T)(e))return u(e,t);if((0,m.x)(e))return function(e,t){return new l.c((n=>{let s;return(0,d.N)(n,t,(()=>{s=e[a.l](),(0,d.N)(n,t,(()=>{let e,t;try{({value:e,done:t}=s.next())}catch(e){return void n.error(e)}t?n.complete():n.next(e)}),0,!0)})),()=>(0,c.T)(null==s?void 0:s.return)&&s.return()}))}(e,t);if((0,v.U)(e))return function(e,t){return u((0,v.C)(e),t)}(e,t)}throw(0,y.L)(e)}function C(e,t){return t?b(e,t):(0,s.Tg)(e)}},69251:(e,t,n)=>{n.d(t,{h:()=>a});var s=n(13188),r=n(90975),i=n(87666),o=n(4285),l=n(92234);function a(...e){const t=(0,o.lI)(e),n=(0,o.R0)(e,1/0),a=e;return a.length?1===a.length?(0,r.Tg)(a[0]):(0,s.U)(n)((0,l.H)(a,t)):i.w}},99330:(e,t,n)=>{n.d(t,{of:()=>i});var s=n(4285),r=n(92234);function i(...e){const t=(0,s.lI)(e);return(0,r.H)(e,t)}},26661:(e,t,n)=>{n.d(t,{B:()=>o});var s=n(26367),r=n(86005),i=n(8473);function o(e,t=s.E){return(0,r.N)(((n,s)=>{let r=null,o=null,l=null;const a=()=>{if(r){r.unsubscribe(),r=null;const e=o;o=null,s.next(e)}};function c(){const n=l+e,i=t.now();if(i<n)return r=this.schedule(void 0,n-i),void s.add(r);a()}n.subscribe((0,i._)(s,(n=>{o=n,l=t.now(),r||(r=t.schedule(c,e),s.add(r))}),(()=>{a(),s.complete()}),void 0,(()=>{o=r=null})))}))}},88067:(e,t,n)=>{n.d(t,{F:()=>o});var s=n(82634),r=n(86005),i=n(8473);function o(e,t=s.D){return e=null!=e?e:l,(0,r.N)(((n,s)=>{let r,o=!0;n.subscribe((0,i._)(s,(n=>{const i=t(n);!o&&e(r,i)||(o=!1,r=i,s.next(n))})))}))}function l(e,t){return e===t}},79653:(e,t,n)=>{n.d(t,{p:()=>i});var s=n(86005),r=n(8473);function i(e,t){return(0,s.N)(((n,s)=>{let i=0;n.subscribe((0,r._)(s,(n=>e.call(t,n,i++)&&s.next(n))))}))}},92801:(e,t,n)=>{n.d(t,{T:()=>i});var s=n(86005),r=n(8473);function i(e,t){return(0,s.N)(((n,s)=>{let i=0;n.subscribe((0,r._)(s,(n=>{s.next(e.call(t,n,i++))})))}))}},13188:(e,t,n)=>{n.d(t,{U:()=>i});var s=n(92765),r=n(82634);function i(e=1/0){return(0,s.Z)(r.D,e)}},57981:(e,t,n)=>{n.d(t,{h:()=>o});var s=n(90975),r=n(89220),i=n(8473);function o(e,t,n,o,l,a,c,d){const u=[];let f=0,h=0,p=!1;const m=()=>{!p||u.length||f||t.complete()},g=e=>f<o?y(e):u.push(e),y=e=>{a&&t.next(e),f++;let d=!1;(0,s.Tg)(n(e,h++)).subscribe((0,i._)(t,(e=>{null==l||l(e),a?g(e):t.next(e)}),(()=>{d=!0}),void 0,(()=>{if(d)try{for(f--;u.length&&f<o;){const e=u.shift();c?(0,r.N)(t,c,(()=>y(e))):y(e)}m()}catch(e){t.error(e)}})))};return e.subscribe((0,i._)(t,g,(()=>{p=!0,m()}))),()=>{null==d||d()}}},92765:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(92801),r=n(90975),i=n(86005),o=n(57981),l=n(20400);function a(e,t,n=1/0){return(0,l.T)(t)?a(((n,i)=>(0,s.T)(((e,s)=>t(n,e,i,s)))((0,r.Tg)(e(n,i)))),n):("number"==typeof t&&(n=t),(0,i.N)(((t,s)=>(0,o.h)(t,s,e,n))))}},66558:(e,t,n)=>{n.d(t,{Q:()=>o});var s=n(89220),r=n(86005),i=n(8473);function o(e,t=0){return(0,r.N)(((n,r)=>{n.subscribe((0,i._)(r,(n=>(0,s.N)(r,e,(()=>r.next(n)),t)),(()=>(0,s.N)(r,e,(()=>r.complete()),t)),(n=>(0,s.N)(r,e,(()=>r.error(n)),t))))}))}},12947:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(73113),r=n(4285),i=n(86005);function o(...e){const t=(0,r.lI)(e);return(0,i.N)(((n,r)=>{(t?(0,s.x)(e,n,t):(0,s.x)(e,n)).subscribe(r)}))}},72485:(e,t,n)=>{n.d(t,{n:()=>o});var s=n(90975),r=n(86005),i=n(8473);function o(e,t){return(0,r.N)(((n,r)=>{let o=null,l=0,a=!1;const c=()=>a&&!o&&r.complete();n.subscribe((0,i._)(r,(n=>{null==o||o.unsubscribe();let a=0;const d=l++;(0,s.Tg)(e(n,d)).subscribe(o=(0,i._)(r,(e=>r.next(t?t(n,e,d,a++):e)),(()=>{o=null,c()})))}),(()=>{a=!0,c()})))}))}},89416:(e,t,n)=>{n.d(t,{s:()=>o});var s=n(87666),r=n(86005),i=n(8473);function o(e){return e<=0?()=>s.w:(0,r.N)(((t,n)=>{let s=0;t.subscribe((0,i._)(n,(t=>{++s<=e&&(n.next(t),e<=s&&n.complete())})))}))}},72661:(e,t,n)=>{n.d(t,{R:()=>l});var s=n(72581);class r extends s.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const i={setInterval(e,t,...n){const{delegate:s}=i;return(null==s?void 0:s.setInterval)?s.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=i;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0};var o=n(71925);class l extends r{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;const s=this.id,r=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(r,s,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return i.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&i.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,s=!1;try{this.work(e)}catch(e){s=!0,n=e||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.o)(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}},66750:(e,t,n)=>{n.d(t,{q:()=>i});var s=n(35134);class r{constructor(e,t=r.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}r.now=s.U.now;class i extends r{constructor(e,t=r.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},26367:(e,t,n)=>{n.d(t,{E:()=>r,b:()=>i});var s=n(72661);const r=new(n(66750).q)(s.R),i=r},35134:(e,t,n)=>{n.d(t,{U:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},4285:(e,t,n)=>{n.d(t,{R0:()=>a,lI:()=>l,ms:()=>o});var s=n(20400),r=n(20687);function i(e){return e[e.length-1]}function o(e){return(0,s.T)(i(e))?e.pop():void 0}function l(e){return(0,r.m)(i(e))?e.pop():void 0}function a(e,t){return"number"==typeof i(e)?e.pop():t}},89220:(e,t,n)=>{function s(e,t,n,s=0,r=!1){const i=t.schedule((function(){n(),r?e.add(this.schedule(null,s)):this.unsubscribe()}),s);if(e.add(i),!r)return i}n.d(t,{N:()=>s})},72481:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(25092),r=n(20400);function i(e){return!!e&&(e instanceof s.c||(0,r.T)(e.lift)&&(0,r.T)(e.subscribe))}},20687:(e,t,n)=>{n.d(t,{m:()=>r});var s=n(20400);function r(e){return e&&(0,s.T)(e.schedule)}},51779:(e,t,n)=>{n.r(t),n.d(t,{FORMLY_CONFIG:()=>$,FieldArrayType:()=>se,FieldType:()=>ee,FieldWrapper:()=>re,FormlyConfig:()=>B,FormlyField:()=>K,FormlyForm:()=>J,FormlyFormBuilder:()=>U,FormlyModule:()=>ue,ɵFormlyAttributes:()=>X,ɵFormlyGroup:()=>te,ɵFormlyTemplate:()=>W,ɵFormlyValidationMessage:()=>ne,ɵclone:()=>P,ɵdefineHiddenProp:()=>T,ɵgetFieldValue:()=>V,ɵhasKey:()=>_,ɵobserve:()=>S,ɵreverseDeepMerge:()=>I});var s=n(52383),r=n(29723),i=n(72481),o=n(69251),l=n(99330),a=n(25092),c=n(92834),d=n(88067),u=n(12947),f=n(26661),h=n(79653),p=n(72485),m=n(89416),g=n(96806),y=n(92801),v=n(63625),b=n(75766);const C=["container"];function x(e,t){}function E(e,t){if(1&e&&s["ɵɵelement"](0,"formly-field",1),2&e){const e=t.$implicit;s["ɵɵproperty"]("field",e)}}const w=["fieldComponent"];function O(e,t,n){if(t.id)return t.id;let r=t.type;return!r&&t.template&&(r="template"),r instanceof s.Type&&(r=r.prototype.constructor.name),[e,r,t.key,n].join("_")}function _(e){return!A(e.key)&&""!==e.key}function F(e){if(!_(e))return[];if(e._keyPath?.key!==e.key){let t=[];if("string"==typeof e.key){const n=-1===e.key.indexOf("[")?e.key:e.key.replace(/\[(\w+)\]/g,".$1");t=-1!==n.indexOf(".")?n.split("."):[n]}else t=Array.isArray(e.key)?e.key.slice(0):[`${e.key}`];T(e,"_keyPath",{key:e.key,path:t})}return e._keyPath.path.slice(0)}const R=["required","pattern","minLength","maxLength","min","max"];function k(e,t){let n=F(e);if(0===n.length)return;let s=e;for(;s.parent;)s=s.parent,n=[...F(s),...n];if(void 0===t&&e.resetOnHide){const e=n.pop();delete n.reduce(((e,t)=>e[t]||{}),s.model)[e]}else!function(e,t,n){for(let n=0;n<t.length-1;n++){const s=t[n];e[s]&&M(e[s])||(e[s]=/^\d+$/.test(t[n+1])?[]:{}),e=e[s]}e[t[t.length-1]]=P(n)}(s.model,n,t)}function V(e){let t=e.parent?e.parent.model:e.model;for(const n of F(e)){if(!t)return t;t=t[n]}return t}function I(e,...t){return t.forEach((t=>{for(const r in t)A(e[r])||""===e[r]?e[r]=P(t[r]):(n=e[r],s=t[r],M(n)&&M(s)&&Object.getPrototypeOf(n)===Object.getPrototypeOf(s)&&!Array.isArray(n)&&!Array.isArray(s)&&I(e[r],t[r]));var n,s})),e}function A(e){return null==e}function D(e){return void 0===e}function j(e){return"function"==typeof e}function M(e){return null!=e&&"object"==typeof e}function P(e){if(!M(e)||(0,i.A)(e)||e instanceof s.TemplateRef||e.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(e.constructor.name))return e;if(e instanceof Set)return new Set(e);if(e instanceof Map)return new Map(e);if(e._isAMomentObject&&j(e.clone))return e.clone();if(e instanceof r.AbstractControl)return null;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.slice(0).map((e=>P(e)));const t=Object.getPrototypeOf(e);let n=Object.create(t);return n=Object.setPrototypeOf(n,t),Object.keys(e).reduce(((t,n)=>{const s=Object.getOwnPropertyDescriptor(e,n);return s.get?Object.defineProperty(t,n,s):t[n]=P(e[n]),t}),n)}function T(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0}),e[t]=n}function G(e,t,n){let s=[];const r=()=>{s.forEach((e=>e())),s=[]},i=S(e,t,(({firstChange:i,currentValue:o})=>{!i&&n(),r(),M(o)&&"Object"===o.constructor.name&&Object.keys(o).forEach((r=>{s.push(G(e,[...t,r],n))}))}));return()=>{i.unsubscribe(),r()}}function S(e,t,n){e._observers||T(e,"_observers",{});let s=e;for(let e=0;e<t.length-1;e++)s[t[e]]&&M(s[t[e]])||(s[t[e]]=/^\d+$/.test(t[e+1])?[]:{}),s=s[t[e]];const r=t[t.length-1],i=t.join(".");e._observers[i]||(e._observers[i]={value:s[r],onChange:[]});const o=e._observers[i];if(s[r]!==o.value&&(o.value=s[r]),-1===o.onChange.indexOf(n)&&(o.onChange.push(n),n({currentValue:o.value,firstChange:!0}),o.onChange.length>=1)){const{enumerable:e}=Object.getOwnPropertyDescriptor(s,r)||{enumerable:!0};Object.defineProperty(s,r,{enumerable:e,configurable:!0,get:()=>o.value,set:e=>{if(e!==o.value){const t=o.value;o.value=e,o.onChange.forEach((n=>n({previousValue:t,currentValue:e,firstChange:!1})))}}})}return{setValue(e){o.value=e},unsubscribe(){o.onChange=o.onChange.filter((e=>e!==n)),0===o.onChange.length&&delete e._observers[i]}}}function N(e,t){if(t=Array.isArray(t)?t.join("."):t,e.fieldGroup)for(let n=0,s=e.fieldGroup.length;n<s;n++){const s=e.fieldGroup[n],r=Array.isArray(s.key)?s.key.join("."):s.key;if(r===t)return s;if(s.fieldGroup&&(A(r)||0===t.indexOf(`${r}.`))){const e=N(s,A(r)?t:t.slice(r.length+1));if(e)return e}}}function H(e){e._componentRefs?.forEach((e=>{if(e instanceof s.ComponentRef){e.injector.get(s.ChangeDetectorRef).markForCheck()}else e.markForCheck()}))}const $=new s.InjectionToken("FORMLY_CONFIG");class B{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:e=>e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(e){e.types&&e.types.forEach((e=>this.setType(e))),e.validators&&e.validators.forEach((e=>this.setValidator(e))),e.wrappers&&e.wrappers.forEach((e=>this.setWrapper(e))),e.validationMessages&&e.validationMessages.forEach((e=>this.addValidatorMessage(e.name,e.message))),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras={...this.extras,...e.extras}),e.presets&&(this.presets={...this.presets,...e.presets.reduce(((e,t)=>({...e,[t.name]:t.config})),{})})}setType(e){Array.isArray(e)?e.forEach((e=>this.setType(e))):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach((t=>{e.hasOwnProperty(t)&&(this.types[e.name][t]=e[t])})))}getType(e,t=!1){if(e instanceof s.Type)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(t)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){const t=this.getType(e.type);if(!t)return;t.defaultOptions&&I(e,t.defaultOptions);const n=t.extends&&this.getType(t.extends).defaultOptions;n&&I(e,n),e?.optionsTypes&&e.optionsTypes.forEach((t=>{const n=this.getType(t).defaultOptions;n&&I(e,n)}));const s=this.resolveFieldTypeRef(e);s?.instance?.defaultOptions&&I(e,s.instance.defaultOptions),!e.wrappers&&t.wrappers&&(e.wrappers=[...t.wrappers])}resolveFieldTypeRef(e={}){const t=this.getType(e.type);if(!t)return null;if(!t.component||t._componentRef)return t._componentRef;const{_viewContainerRef:n,_injector:s}=e.options;if(!n||!s)return null;const r=n.createComponent(t.component,{injector:s});T(t,"_componentRef",r);try{r.destroy()}catch(t){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,t)}return t._componentRef}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach((t=>{this.setTypeWrapper(t,e.name)}))}getWrapper(e){if(e instanceof s.Type)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(t)&&this.types[e].wrappers.push(t)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,t){if(this.messages[e]=t,"undefined"==typeof ngDevMode||ngDevMode){const n={minlength:"minLength",maxlength:"maxLength"};n[e]&&(console.warn(`Formly deprecation: passing validation messages key '${e}' is deprecated since v6.0, use '${n[e]}' instead.`),this.messages[n[e]]=t)}}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach((e=>{const t=e.priority??1;this.extensionsByPriority[t]={...this.extensionsByPriority[t],[e.name]:e.extension}})),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort(((e,t)=>e-t)).reduce(((e,t)=>({...e,...this.extensionsByPriority[t]})),{})}mergeExtendedType(e){if(!this.types[e].extends)return;const t=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}}B.ɵfac=function(e){return new(e||B)},B.ɵprov=s["ɵɵdefineInjectable"]({token:B,factory:B.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](B,[{type:s.Injectable,args:[{providedIn:"root"}]}],null,null);class U{constructor(e,t,n,s){this.config=e,this.injector=t,this.viewContainerRef=n,this.parentForm=s}buildForm(e,t=[],n,s){this.build({fieldGroup:t,model:n,form:e,options:s})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent?this._build(e):(this._setOptions(e),function(e,t){const n=e._updateTreeValidity.bind(e);e._updateTreeValidity=()=>{},t(),e._updateTreeValidity=n}(e.form,(()=>{this._build(e);const t=e.options;t.checkExpressions?.(e,!0),t.detectChanges?.(e)})))}_build(e){if(!e)return;const t=Object.values(this.config.extensions);t.forEach((t=>t.prePopulate?.(e))),t.forEach((t=>t.onPopulate?.(e))),e.fieldGroup?.forEach((e=>this._build(e))),t.forEach((t=>t.postPopulate?.(e)))}_setOptions(e){e.form=e.form||new r.FormGroup({}),e.model=e.model||{},e.options=e.options||{};const t=e.options;t._viewContainerRef||T(t,"_viewContainerRef",this.viewContainerRef),t._injector||T(t,"_injector",this.injector),t.build||(t._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(e)},t.build=(t=e)=>(this.build(t),t)),!t.parentForm&&this.parentForm&&(T(t,"parentForm",this.parentForm),S(t,["parentForm","submitted"],(({firstChange:n})=>{n||(t.checkExpressions(e),t.detectChanges(e))})))}}function L(e,t=!1){const n=e.formControl,s=n._fields?n._fields.indexOf(e):-1;-1!==s&&n._fields.splice(s,1);const i=n.parent;if(!i)return;const o={emitEvent:t};if(i instanceof r.FormArray){const e=i.controls.findIndex((e=>e===n));-1!==e&&i.removeAt(e,o)}else if(i instanceof r.FormGroup){const t=F(e),s=t[t.length-1];i.get([s])===n&&i.removeControl(s,o)}n.setParent(null)}function Q(e){return e.formControl?e.formControl:!1===e.shareFormControl?null:e.form?.get(F(e))}function q(e,t,n=!1){if((t=t||e.formControl)._fields||T(t,"_fields",[]),-1===t._fields.indexOf(e)&&t._fields.push(e),!e.formControl&&t){T(e,"formControl",t),t.setValidators(null),t.setAsyncValidators(null),e.props.disabled=!!e.props.disabled;const n=S(e,["props","disabled"],(({firstChange:t,currentValue:n})=>{t||(n?e.formControl.disable():e.formControl.enable())}));t instanceof r.FormControl&&t.registerOnDisabledChange(n.setValue)}if(!e.form||!_(e))return;let s=e.form;const i=F(e),o=V(e);A(t.value)&&A(o)||t.value===o||!(t instanceof r.FormControl)||t.patchValue(o);for(let e=0;e<i.length-1;e++){const t=i[e];s.get([t])||s.setControl(t,new r.FormGroup({}),{emitEvent:n}),s=s.get([t])}const l=i[i.length-1];e._hide||s.get([l])===t||s.setControl(l,t,{emitEvent:n})}function z(e,t=!1){const n=e.status,s=e.value;e.updateValueAndValidity({emitEvent:!1,onlySelf:t}),n!==e.status&&e.statusChanges.emit(e.status),s!==e.value&&e.valueChanges.emit(e.value)}function Z(e){delete e?._fields,e.setValidators(null),e.setAsyncValidators(null),(e instanceof r.FormGroup||e instanceof r.FormArray)&&Object.values(e.controls).forEach((e=>Z(e)))}U.ɵfac=function(e){return new(e||U)(s["ɵɵinject"](B),s["ɵɵinject"](s.Injector),s["ɵɵinject"](s.ViewContainerRef,8),s["ɵɵinject"](r.FormGroupDirective,8))},U.ɵprov=s["ɵɵdefineInjectable"]({token:U,factory:U.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](U,[{type:s.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:B},{type:s.Injector},{type:s.ViewContainerRef,decorators:[{type:s.Optional}]},{type:r.FormGroupDirective,decorators:[{type:s.Optional}]}]}),null);class W{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}}W.ɵfac=function(e){return new(e||W)(s["ɵɵdirectiveInject"](s.TemplateRef))},W.ɵdir=s["ɵɵdefineDirective"]({type:W,selectors:[["","formlyTemplate",""]],inputs:{name:[s["ɵɵInputFlags"].None,"formlyTemplate","name"]},features:[s["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](W,[{type:s.Directive,args:[{selector:"[formlyTemplate]"}]}],(function(){return[{type:s.TemplateRef}]}),{name:[{type:s.Input,args:["formlyTemplate"]}]});class Y{}Y.ɵfac=function(e){return new(e||Y)},Y.ɵprov=s["ɵɵdefineInjectable"]({token:Y,factory:Y.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](Y,[{type:s.Injectable}],null,null);class K{constructor(e,t,n,s,r){this.config=e,this.renderer=t,this._elementRef=n,this.hostContainerRef=s,this.form=r,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof s.ComponentRef?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach((e=>e.unsubscribe())),this.hooksObservers.forEach((e=>e())),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,t,n=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),n=this.field?.wrappers),n?.length>0){const[s,...r]=n,{component:i}=this.config.getWrapper(s),o=e.createComponent(i);this.attachComponentRef(o,t),S(o.instance,["fieldComponent"],(({currentValue:e,previousValue:n,firstChange:s})=>{if(e){if(n&&n._lContainer===e._lContainer)return;const i=n?n.detach():null;i&&!i.destroyed?e.insert(i):this.renderField(e,t,r),!s&&o.changeDetectorRef.detectChanges()}}))}else if(t?.type){const n=this.form?.templates?.find((e=>e.name===t.type));let s;if(n)s=e.createEmbeddedView(n.ref,{$implicit:t});else{const{component:n}=this.config.getType(t.type,!0);s=e.createComponent(n)}this.attachComponentRef(s,t)}}triggerHook(e,t){if(("onInit"===e||"onChanges"===e&&t.field&&!t.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!t||t.field)){const t=this.field.hooks[e](this.field);if((0,i.A)(t)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){const e=t.subscribe();this.hooksObservers.push((()=>e.unsubscribe()))}}"onChanges"===e&&t.field&&(this.resetRefs(t.field.previousValue),this.render())}attachComponentRef(e,t){this.componentRefs.push(e),t._componentRefs.push(e),e instanceof s.ComponentRef&&Object.assign(e.instance,{field:t})}render(){this.field&&(this.field.options?(this.detectFieldBuild=!1,this.hostObservers.forEach((e=>e.unsubscribe())),this.hostObservers=[S(this.field,["hide"],(({firstChange:e,currentValue:t})=>{const n=this.containerRef;!1===this.config.extras.lazyRender?(e&&this.renderField(n,this.field),(!e||e&&t)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",t?"none":"")):t?(n.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(n,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)})),S(this.field,["className"],(({firstChange:e,currentValue:t})=>{!(!e||e&&t)||this.config.extras.lazyRender&&!0===this.field.hide||this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",t)})),...["touched","pristine","status"].map((e=>S(this.field,["formControl",e],(({firstChange:e})=>!e&&H(this.field)))))]):this.detectFieldBuild=!0)}resetRefs(e){e&&(e._componentRefs?e._componentRefs=e._componentRefs.filter((e=>-1===this.componentRefs.indexOf(e))):T(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(this.valueChangesUnsubscribe(),!e)return()=>{};const t=[G(e,["props"],(()=>e.options.detectChanges(e))),G(e.options,["formState"],(()=>e.options.detectChanges(e)))];for(const n of Object.keys(e._expressions||{})){const s=S(e,["_expressions",n],(({currentValue:e,previousValue:t})=>{t?.subscription&&(t.subscription.unsubscribe(),t.subscription=null),(0,i.A)(e.value$)&&(e.subscription=e.value$.subscribe())}));t.push((()=>{e._expressions[n]?.subscription&&e._expressions[n].subscription.unsubscribe(),s.unsubscribe()}))}for(const n of[["template"],["fieldGroupClassName"],["validation","show"]]){const s=S(e,n,(({firstChange:t})=>!t&&e.options.detectChanges(e)));t.push((()=>s.unsubscribe()))}if(e.formControl&&!e.fieldGroup){const n=e.formControl;let s=n.valueChanges.pipe((0,d.F)(((e,t)=>e===t&&!Array.isArray(e)&&!M(e))));n.value!==V(e)&&(s=s.pipe((0,u.Z)(n.value)));const{updateOn:i,debounce:o}=e.modelOptions;(!i||"change"===i)&&o?.default>0&&(s=n.valueChanges.pipe((0,f.B)(o.default)));const l=s.subscribe((t=>{n._fields?.length>1&&n instanceof r.FormControl&&n.patchValue(t,{emitEvent:!1,onlySelf:!0}),e.parsers?.forEach((e=>t=e(t))),t===e.formControl.value?(_(e)&&k(e,t),e.options.fieldChanges.next({value:t,field:e,type:"valueChanges"})):e.formControl.setValue(t)}));t.push((()=>l.unsubscribe()))}return()=>t.forEach((e=>e()))}}K.ɵfac=function(e){return new(e||K)(s["ɵɵdirectiveInject"](B),s["ɵɵdirectiveInject"](s.Renderer2),s["ɵɵdirectiveInject"](s.ElementRef),s["ɵɵdirectiveInject"](s.ViewContainerRef),s["ɵɵdirectiveInject"](Y,8))},K.ɵcmp=s["ɵɵdefineComponent"]({type:K,selectors:[["formly-field"]],viewQuery:function(e,t){if(1&e&&s["ɵɵviewQuery"](C,7,s.ViewContainerRef),2&e){let e;s["ɵɵqueryRefresh"](e=s["ɵɵloadQuery"]())&&(t.viewContainerRef=e.first)}},inputs:{field:"field"},features:[s["ɵɵNgOnChangesFeature"]],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&s["ɵɵtemplate"](0,x,0,0,"ng-template",null,0,s["ɵɵtemplateRefExtractor"])},styles:["[_nghost-%COMP%]:empty{display:none}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](K,[{type:s.Component,args:[{selector:"formly-field",template:"<ng-template #container></ng-template>",styles:[":host:empty{display:none}\n"]}]}],(function(){return[{type:B},{type:s.Renderer2},{type:s.ElementRef},{type:s.ViewContainerRef},{type:Y,decorators:[{type:s.Optional}]}]}),{field:[{type:s.Input}],viewContainerRef:[{type:s.ViewChild,args:["container",{read:s.ViewContainerRef,static:!0}]}]});class J{constructor(e,t,n,r){this.builder=e,this.config=t,this.ngZone=n,this.fieldTemplates=r,this.modelChange=new s.EventEmitter,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.config.extras.immutable&&this._modelChangeValue===e||this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&Z(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();const e=this.field.options.fieldChanges.pipe((0,h.p)((({field:e,type:t})=>_(e)&&"valueChanges"===t)),(0,p.n)((()=>this.ngZone.onStable.asObservable().pipe((0,m.s)(1))))).subscribe((()=>this.ngZone.runGuarded((()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=P(this.model))}))));return()=>e.unsubscribe()}setField(e){this.config.extras.immutable?this.field={...this.field,...P(e)}:Object.keys(e).forEach((t=>this.field[t]=e[t]))}}J.ɵfac=function(e){return new(e||J)(s["ɵɵdirectiveInject"](U),s["ɵɵdirectiveInject"](B),s["ɵɵdirectiveInject"](s.NgZone),s["ɵɵdirectiveInject"](Y))},J.ɵcmp=s["ɵɵdefineComponent"]({type:J,selectors:[["formly-form"]],contentQueries:function(e,t,n){if(1&e&&s["ɵɵcontentQuery"](n,W,4),2&e){let e;s["ɵɵqueryRefresh"](e=s["ɵɵloadQuery"]())&&(t.templates=e)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[s["ɵɵProvidersFeature"]([U,Y]),s["ɵɵNgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"field"]],template:function(e,t){1&e&&s["ɵɵelement"](0,"formly-field",0),2&e&&s["ɵɵproperty"]("field",t.field)},dependencies:[K],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](J,[{type:s.Component,args:[{selector:"formly-form",template:'<formly-field [field]="field"></formly-field>',providers:[U,Y],changeDetection:s.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:U},{type:B},{type:s.NgZone},{type:Y}]}),{form:[{type:s.Input}],model:[{type:s.Input}],fields:[{type:s.Input}],options:[{type:s.Input}],modelChange:[{type:s.Output}],templates:[{type:s.ContentChildren,args:[W]}]});class X{constructor(e,t,n){this.renderer=e,this.elementRef=t,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(e,t)=>{switch(e){case"focus":return this.onFocus(t);case"blur":return this.onBlur(t);case"change":return this.onChange(t);default:return this.props[e](this.field,t)}}},this.document=n}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach((e=>e())),this.uiEvents.events.forEach((e=>{(this.props?.[e]||-1!==["focus","blur","change"].indexOf(e))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,e,(t=>this.uiEvents.callback(e,t))))})),this.props?.attributes&&S(this.field,["props","attributes"],(({currentValue:e,previousValue:t})=>{t&&Object.keys(t).forEach((e=>this.removeAttribute(e))),e&&Object.keys(e).forEach((t=>{null!=e[t]&&this.setAttribute(t,e[t])}))})),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=S(this.field,["focus"],(({currentValue:e})=>{this.toggleFocus(e)})))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const e=this.elementRef.nativeElement;this.uiAttributes=[...R,"tabindex","placeholder","readonly","disabled","step"].filter((t=>!e.hasAttribute||!e.hasAttribute(t)))}this.uiAttributes.forEach((e=>{const t=this.props[e];this.uiAttributesCache[e]===t||this.props.attributes&&this.props.attributes.hasOwnProperty(e.toLowerCase())||(this.uiAttributesCache[e]=t,t||0===t?this.setAttribute(e,!0===t?e:`${t}`):this.removeAttribute(e))}))}ngOnDestroy(){this.uiEvents.listeners.forEach((e=>e())),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){const t=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!t||!t.nativeElement.focus)return;const n=!!this.document.activeElement&&this.fieldAttrElements.some((({nativeElement:e})=>this.document.activeElement===e||e.contains(this.document.activeElement)));e&&!n?Promise.resolve().then((()=>t.nativeElement.focus())):!e&&n&&Promise.resolve().then((()=>t.nativeElement.blur()))}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(-1===e._elementRefs?.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):T(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){const t=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==t&&e._elementRefs.splice(t,1)}setAttribute(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}X.ɵfac=function(e){return new(e||X)(s["ɵɵdirectiveInject"](s.Renderer2),s["ɵɵdirectiveInject"](s.ElementRef),s["ɵɵdirectiveInject"](v.DOCUMENT))},X.ɵdir=s["ɵɵdefineDirective"]({type:X,selectors:[["","formlyAttributes",""]],hostBindings:function(e,t){1&e&&s["ɵɵlistener"]("change",(function(e){return t.onHostChange(e)}))},inputs:{field:[s["ɵɵInputFlags"].None,"formlyAttributes","field"],id:"id"},features:[s["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](X,[{type:s.Directive,args:[{selector:"[formlyAttributes]",host:{"(change)":"onHostChange($event)"}}]}],(function(){return[{type:s.Renderer2},{type:s.ElementRef},{type:void 0,decorators:[{type:s.Inject,args:[v.DOCUMENT]}]}]}),{field:[{type:s.Input,args:["formlyAttributes"]}],id:[{type:s.Input}]});class ee{get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}ee.ɵfac=function(e){return new(e||ee)},ee.ɵdir=s["ɵɵdefineDirective"]({type:ee,inputs:{field:"field"}}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](ee,[{type:s.Directive}],null,{field:[{type:s.Input}]});class te extends ee{}te.ɵfac=(()=>{let e;return function(t){return(e||(e=s["ɵɵgetInheritedFactory"](te)))(t||te)}})(),te.ɵcmp=s["ɵɵdefineComponent"]({type:te,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,t){2&e&&s["ɵɵclassMap"](t.field.fieldGroupClassName||"")},features:[s["ɵɵInheritDefinitionFeature"]],ngContentSelectors:["*"],decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,t){1&e&&(s["ɵɵprojectionDef"](),s["ɵɵtemplate"](0,E,1,1,"formly-field",0),s["ɵɵprojection"](1)),2&e&&s["ɵɵproperty"]("ngForOf",t.field.fieldGroup)},dependencies:[K,v.NgForOf],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](te,[{type:s.Component,args:[{selector:"formly-group",template:'\n    <formly-field *ngFor="let f of field.fieldGroup" [field]="f"></formly-field>\n    <ng-content></ng-content>\n  ',host:{"[class]":'field.fieldGroupClassName || ""'},changeDetection:s.ChangeDetectionStrategy.OnPush}]}],null,null);class ne{constructor(e){this.config=e}ngOnChanges(){const e=R.map((e=>`templateOptions.${e}`));this.errorMessage$=(0,o.h)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,h.p)((({field:t,type:n,property:s})=>t===this.field&&"expressionChanges"===n&&(-1!==s.indexOf("validation")||-1!==e.indexOf(s))))):(0,l.of)(null)).pipe((0,u.Z)(null),(0,p.n)((()=>(0,i.A)(this.errorMessage)?this.errorMessage:(0,l.of)(this.errorMessage))))}get errorMessage(){const e=this.field.formControl;for(const t in e.errors)if(e.errors.hasOwnProperty(t)){let n=this.config.getValidatorMessage(t);if(M(e.errors[t])){if(e.errors[t].errorPath)return;e.errors[t].message&&(n=e.errors[t].message)}return this.field.validation?.messages?.[t]&&(n=this.field.validation.messages[t]),this.field.validators?.[t]?.message&&(n=this.field.validators[t].message),this.field.asyncValidators?.[t]?.message&&(n=this.field.asyncValidators[t].message),"function"==typeof n?n(e.errors[t],this.field):n}}}ne.ɵfac=function(e){return new(e||ne)(s["ɵɵdirectiveInject"](B))},ne.ɵcmp=s["ɵɵdefineComponent"]({type:ne,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[s["ɵɵNgOnChangesFeature"]],decls:2,vars:3,template:function(e,t){1&e&&(s["ɵɵtext"](0),s["ɵɵpipe"](1,"async")),2&e&&s["ɵɵtextInterpolate"](s["ɵɵpipeBind1"](1,1,t.errorMessage$))},dependencies:[v.AsyncPipe],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](ne,[{type:s.Component,args:[{selector:"formly-validation-message",template:"{{ errorMessage$ | async }}",changeDetection:s.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:B}]}),{field:[{type:s.Input}]});class se extends ee{onPopulate(e){if(!e.formControl&&_(e)){const t=Q(e);q(e,t||new r.FormArray([],{updateOn:e.modelOptions.updateOn}))}e.fieldGroup=e.fieldGroup||[];const t=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>t)for(let n=e.fieldGroup.length-1;n>=t;--n)L(e.fieldGroup[n],!0),e.fieldGroup.splice(n,1);for(let n=e.fieldGroup.length;n<t;n++){const t={...P("function"==typeof e.fieldArray?e.fieldArray(e):e.fieldArray),key:`${n}`};e.fieldGroup.push(t)}}add(e,t,{markAsDirty:n}={markAsDirty:!0}){e=null==e?this.field.fieldGroup.length:e,this.model||k(this.field,[]),this.model.splice(e,0,t?P(t):void 0),this._build(),n&&this.formControl.markAsDirty()}remove(e,{markAsDirty:t}={markAsDirty:!0}){this.model.splice(e,1);const n=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach(((e,t)=>e.key=`${t}`)),L(n,!0),this._build(),t&&this.formControl.markAsDirty()}_build(){(this.field.formControl._fields??[this.field]).forEach((e=>this.options.build(e))),this.options.fieldChanges.next({field:this.field,value:V(this.field),type:"valueChanges"})}}se.ɵfac=(()=>{let e;return function(t){return(e||(e=s["ɵɵgetInheritedFactory"](se)))(t||se)}})(),se.ɵdir=s["ɵɵdefineDirective"]({type:se,features:[s["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](se,[{type:s.Directive}],null,null);class re extends ee{set _staticContent(e){this.fieldComponent=e}}re.ɵfac=(()=>{let e;return function(t){return(e||(e=s["ɵɵgetInheritedFactory"](re)))(t||re)}})(),re.ɵdir=s["ɵɵdefineDirective"]({type:re,viewQuery:function(e,t){if(1&e&&(s["ɵɵviewQuery"](w,5,s.ViewContainerRef),s["ɵɵviewQuery"](w,7,s.ViewContainerRef)),2&e){let e;s["ɵɵqueryRefresh"](e=s["ɵɵloadQuery"]())&&(t.fieldComponent=e.first),s["ɵɵqueryRefresh"](e=s["ɵɵloadQuery"]())&&(t._staticContent=e.first)}},features:[s["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](re,[{type:s.Directive}],null,{fieldComponent:[{type:s.ViewChild,args:["fieldComponent",{read:s.ViewContainerRef}]}],_staticContent:[{type:s.ViewChild,args:["fieldComponent",{read:s.ViewContainerRef,static:!0}]}]});class ie extends ee{constructor(e){super(),this.sanitizer=e,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}ie.ɵfac=function(e){return new(e||ie)(s["ɵɵdirectiveInject"](b.DomSanitizer))},ie.ɵcmp=s["ɵɵdefineComponent"]({type:ie,selectors:[["formly-template"]],features:[s["ɵɵInheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,t){1&e&&s["ɵɵelement"](0,"div",0),2&e&&s["ɵɵproperty"]("innerHtml",t.template,s["ɵɵsanitizeHtml"])},encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](ie,[{type:s.Component,args:[{selector:"formly-template",template:'<div [innerHtml]="template"></div>',changeDetection:s.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:b.DomSanitizer}]}),null);class oe{onPopulate(e){if(e._expressions)return;T(e,"_expressions",{}),S(e,["hide"],(({currentValue:t,firstChange:n})=>{T(e,"_hide",!!t),(!n||n&&!0===t)&&(e.props.hidden=t,e.options._hiddenFieldsForCheck.push(e))})),e.hideExpression&&S(e,["hideExpression"],(({currentValue:t})=>{e._expressions.hide=this.parseExpressions(e,"hide","boolean"==typeof t?()=>t:t)}));const t=(t,n)=>{"string"==typeof n||j(n)?e._expressions[t]=this.parseExpressions(e,t,n):n instanceof a.c&&(e._expressions[t]={value$:n.pipe((0,g.M)((n=>{this.evalExpr(e,t,n),e.options.detectChanges(e)})))})};e.expressions=e.expressions||{};for(const n of Object.keys(e.expressions))S(e,["expressions",n],(({currentValue:s})=>{t(n,j(s)?(...t)=>s(e,t[3]):s)}));e.expressionProperties=e.expressionProperties||{};for(const n of Object.keys(e.expressionProperties))S(e,["expressionProperties",n],(({currentValue:e})=>t(n,e)))}postPopulate(e){if(!e.parent&&!e.options.checkExpressions){let t=!1;e.options.checkExpressions=(n,s)=>{if(t)return;t=!0;const r=this.checkExpressions(n,s),i=e.options;i._hiddenFieldsForCheck.sort((e=>e.hide?-1:1)).forEach((e=>this.changeHideState(e,e.hide,!s))),i._hiddenFieldsForCheck=[],r&&(this.checkExpressions(e),e.options&&e.options.detectChanges&&e.options.detectChanges(e)),t=!1},e.options._checkField=(t,n)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),e.options.checkExpressions(t,n)}}}parseExpressions(e,t,n){let s,r;if(e.parent&&["hide","props.disabled"].includes(t)){const n=e=>"hide"===t?e.hide:e.props.disabled;s=()=>{let t=e.parent;for(;t.parent&&!n(t);)t=t.parent;return n(t)}}return"string"==typeof(n=n||(()=>!1))&&(n=function(e,t){try{return Function(...t,`return ${e};`)}catch(e){console.error(e)}}(n,["model","formState","field"])),{callback:o=>{try{const d=(l=s?(...t)=>s(e)||n(...t):n,a={field:e},c=[e.model,e.options.formState,e,o],"function"==typeof l?l.apply(a,c):!!l);return!(!o&&(r===d||M(d)&&!(0,i.A)(d)&&JSON.stringify(d)===JSON.stringify(r)))&&(r=d,this.evalExpr(e,t,d),!0)}catch(e){throw e.message=`[Formly Error] [Expression "${t}"] ${e.message}`,e}var l,a,c}}}checkExpressions(e,t=!1){if(!e)return!1;let n=!1;if(e._expressions)for(const s of Object.keys(e._expressions))e._expressions[s].callback?.(t)&&(n=!0);return e.fieldGroup?.forEach((e=>this.checkExpressions(e,t)&&(n=!0))),n}changeDisabledState(e,t){e.fieldGroup&&e.fieldGroup.filter((e=>!e._expressions.hasOwnProperty("props.disabled"))).forEach((e=>this.changeDisabledState(e,t))),_(e)&&e.props.disabled!==t&&(e.props.disabled=t)}changeHideState(e,t,n){if(e.fieldGroup&&e.fieldGroup.filter((e=>!e._expressions.hide)).forEach((e=>this.changeHideState(e,t,n))),e.formControl&&_(e)){T(e,"_hide",!(!t&&!e.hide));const s=e.formControl;s._fields?.length>1&&z(s),!0!==t||s._fields&&!s._fields.every((e=>!!e._hide))?!1===t&&(e.resetOnHide&&!D(e.defaultValue)&&D(V(e))&&k(e,e.defaultValue),q(e,void 0,!0),e.resetOnHide&&e.fieldArray&&e.fieldGroup?.length!==e.model?.length&&e.options.build(e)):(L(e,!0),n&&e.resetOnHide&&(k(e,void 0),e.formControl.reset({value:void 0,disabled:e.formControl.disabled}),e.options.fieldChanges.next({value:void 0,field:e,type:"valueChanges"}),e.fieldGroup&&e.formControl instanceof r.FormArray&&(e.fieldGroup.length=0)))}e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"hidden",value:t})}evalExpr(e,t,n){try{let s=e;const r=this._evalExpressionPath(e,t),i=r.length-1;for(let e=0;e<i;e++)s=s[r[e]];s[r[i]]=n}catch(e){throw e.message=`[Formly Error] [Expression "${t}"] ${e.message}`,e}if(["templateOptions.disabled","props.disabled"].includes(t)&&_(e)&&this.changeDisabledState(e,n),0===t.indexOf("model.")){const s=t.replace(/^model\./,""),r=e?.key===s?e.formControl:e.form.get(s);!r||A(r.value)&&A(n)||r.value===n||r.patchValue(n)}this.emitExpressionChanges(e,t,n)}emitExpressionChanges(e,t,n){e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"expressionChanges",property:t,value:n})}_evalExpressionPath(e,t){if(e._expressions[t]&&e._expressions[t].paths)return e._expressions[t].paths;let n=[];return-1===t.indexOf("[")?n=t.split("."):t.split(/[[\]]{1,2}/).filter((e=>e)).forEach((e=>{const t=e.match(/['|"](.*?)['|"]/);t?n.push(t[1]):n.push(...e.split(".").filter((e=>e)))})),e._expressions[t]&&(e._expressions[t].paths=n),n}}class le{constructor(e){this.config=e}onPopulate(e){this.initFieldValidation(e,"validators"),this.initFieldValidation(e,"asyncValidators")}initFieldValidation(e,t){const n=[];if("validators"!==t||e.hasOwnProperty("fieldGroup")&&!_(e)||n.push(this.getPredefinedFieldValidation(e)),e[t])for(const s of Object.keys(e[t]))"validation"===s?n.push(...e[t].validation.map((t=>this.wrapNgValidatorFn(e,t)))):n.push(this.wrapNgValidatorFn(e,e[t][s],s));T(e,"_"+t,n)}getPredefinedFieldValidation(e){let t=[];return R.forEach((n=>S(e,["props",n],(({currentValue:s,firstChange:r})=>{t=t.filter((e=>e!==n)),null!=s&&!1!==s&&t.push(n),!r&&e.formControl&&z(e.formControl)})))),n=>0===t.length?null:r.Validators.compose(t.map((t=>()=>{const s=e.props[t];switch(t){case"required":return r.Validators.required(n);case"pattern":return r.Validators.pattern(s)(n);case"minLength":const t=r.Validators.minLength(s)(n),i=this.config.getValidatorMessage("minlength")||e.validation?.messages?.minlength?"minlength":"minLength";return t?{[i]:t.minlength}:null;case"maxLength":const o=r.Validators.maxLength(s)(n),l=this.config.getValidatorMessage("maxlength")||e.validation?.messages?.maxlength?"maxlength":"maxLength";return o?{[l]:o.maxlength}:null;case"min":return r.Validators.min(s)(n);case"max":return r.Validators.max(s)(n);default:return null}})))(n)}wrapNgValidatorFn(e,t,n){let s;if("string"==typeof t&&(s=P(this.config.getValidator(t))),"object"==typeof t&&t.name&&(s=P(this.config.getValidator(t.name)),t.options&&(s.options=t.options)),"object"==typeof t&&t.expression){const{expression:e,...r}=t;s={name:n,validation:e,options:Object.keys(r).length>0?r:null}}return"function"==typeof t&&(s={name:n,validation:t}),t=>{const r=s.validation(t,e,s.options);return(o=r)&&"function"==typeof o.then?r.then((t=>this.handleAsyncResult(e,n?!!t:t,s))):(0,i.A)(r)?r.pipe((0,y.T)((t=>this.handleAsyncResult(e,n?!!t:t,s)))):this.handleResult(e,n?!!r:r,s);var o}}handleAsyncResult(e,t,n){return e.options.detectChanges(e),this.handleResult(e,t,n)}handleResult(e,t,{name:n,options:s}){"boolean"==typeof t&&(t=t?null:{[n]:s||!0});const r=e.formControl;return r?._childrenErrors?.[n]?.(),M(t)&&Object.keys(t).forEach((n=>{const i=t[n].errorPath?t[n].errorPath:s?.errorPath,o=i?e.formControl.get(i):null;if(o){const{errorPath:e,...s}=t[n];o.setErrors({...o.errors||{},[n]:s}),!r._childrenErrors&&T(r,"_childrenErrors",{}),r._childrenErrors[n]=()=>{const{[n]:e,...t}=o.errors||{};o.setErrors(0===Object.keys(t).length?null:t)}}})),t}}class ae{prePopulate(e){this.root||(this.root=e),e.parent&&Object.defineProperty(e,"form",{get:()=>e.parent.formControl,configurable:!0})}onPopulate(e){e.hasOwnProperty("fieldGroup")&&!_(e)?T(e,"formControl",e.form):this.addFormControl(e)}postPopulate(e){if(this.root!==e)return;this.root=null;if(this.setValidators(e)&&e.parent){let t=e.parent;for(;t;)!_(t)&&t.parent||z(t.formControl,!0),t=t.parent}}addFormControl(e){let t=Q(e);if(!t){const n={updateOn:e.modelOptions.updateOn};if(e.fieldGroup)t=new r.FormGroup({},n);else{const s=_(e)?V(e):e.defaultValue;t=new r.FormControl({value:s,disabled:!1},{...n,initialValueIsDefault:!0})}}q(e,t)}setValidators(e,t=!1){!1===t&&_(e)&&e.props?.disabled&&(t=!0);let n=!1;if(e.fieldGroup?.forEach((e=>e&&this.setValidators(e,t)&&(n=!0))),_(e)||!e.parent||!_(e)&&!e.fieldGroup){const{formControl:s}=e;if(s&&(_(e)&&s instanceof r.FormControl&&(t&&s.enabled&&(s.disable({emitEvent:!1,onlySelf:!0}),n=!0),!t&&s.disabled&&(s.enable({emitEvent:!1,onlySelf:!0}),n=!0)),null!==s.validator&&null!==s.asyncValidator||(s.setValidators((()=>{const t=r.Validators.compose(this.mergeValidators(e,"_validators"));return t?t(s):null})),s.setAsyncValidators((()=>{const t=r.Validators.composeAsync(this.mergeValidators(e,"_asyncValidators"));return t?t(s):(0,l.of)(null)})),n=!0),n)){z(s,!0);let t=s.parent;for(let n=1;n<F(e).length;n++)t&&(z(t,!0),t=t.parent)}}return n}mergeValidators(e,t){const n=[],s=e.formControl;return s?._fields?.length>1?s._fields.filter((e=>!e._hide)).forEach((e=>n.push(...e[t]))):e[t]&&n.push(...e[t]),e.fieldGroup&&e.fieldGroup.filter((e=>e?.fieldGroup&&!_(e))).forEach((e=>n.push(...this.mergeValidators(e,t)))),n}}class ce{constructor(e){this.config=e,this.formId=0}prePopulate(e){const t=e.parent;this.initRootOptions(e),this.initFieldProps(e),t&&(Object.defineProperty(e,"options",{get:()=>t.options,configurable:!0}),Object.defineProperty(e,"model",{get:()=>_(e)&&e.fieldGroup?V(e):t.model,configurable:!0})),Object.defineProperty(e,"get",{value:t=>N(e,t),configurable:!0}),this.getFieldComponentInstance(e).prePopulate?.(e)}onPopulate(e){this.initFieldOptions(e),this.getFieldComponentInstance(e).onPopulate?.(e),e.fieldGroup&&e.fieldGroup.forEach(((t,n)=>{t&&(Object.defineProperty(t,"parent",{get:()=>e,configurable:!0}),Object.defineProperty(t,"index",{get:()=>n,configurable:!0})),this.formId++}))}postPopulate(e){this.getFieldComponentInstance(e).postPopulate?.(e)}initFieldProps(e){e.props??(e.props=e.templateOptions),Object.defineProperty(e,"templateOptions",{get:()=>e.props,set:t=>e.props=t,configurable:!0})}initRootOptions(e){if(e.parent)return;const t=e.options;e.options.formState=e.options.formState||{},t.showError||(t.showError=this.config.extras.showError),t.fieldChanges||T(t,"fieldChanges",new c.B),t._hiddenFieldsForCheck||(t._hiddenFieldsForCheck=[]),t._markForCheck=e=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),t.detectChanges(e)},t.detectChanges=e=>{e._componentRefs&&(e.options.checkExpressions(e),H(e)),e.fieldGroup?.forEach((e=>e&&t.detectChanges(e)))},t.resetModel=n=>{n=P(n??t._initialModel),e.model&&(Object.keys(e.model).forEach((t=>delete e.model[t])),Object.assign(e.model,n||{})),t.build(e),e.form.reset(e.model),t.parentForm&&t.parentForm.control===e.formControl&&(t.parentForm.submitted=!1)},t.updateInitialValue=n=>t._initialModel=P(n??e.model),e.options.updateInitialValue()}initFieldOptions(e){if(I(e,{id:O(`formly_${this.formId}`,e,e.index),hooks:{},modelOptions:{},validation:{messages:{}},props:e.type&&_(e)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==e.resetOnHide&&(e.resetOnHide=!0),"formly-template"!==e.type&&(e.template||e.expressions?.template||e.expressionProperties?.template)&&(e.type="formly-template"),!e.type&&e.fieldGroup&&(e.type="formly-group"),e.type&&this.config.getMergedField(e),_(e)&&!D(e.defaultValue)&&D(V(e))){const t=e=>e.hide||e.expressions?.hide||e.hideExpression;let n=!e.resetOnHide||!t(e);if(!t(e)&&e.resetOnHide){let s=e.parent;for(;s&&!t(s);)s=s.parent;n=!s||!t(s)}n&&k(e,e.defaultValue)}e.wrappers=e.wrappers||[]}getFieldComponentInstance(e){const t=()=>{let t=this.config.resolveFieldTypeRef(e);const n=e._componentRefs?.slice(-1)[0];return n instanceof s.ComponentRef&&n?.componentType===t?.componentType&&(t=n),t?.instance};return e._proxyInstance||T(e,"_proxyInstance",new Proxy({},{get:(e,n)=>t()?.[n],set:(e,n,s)=>t()[n]=s})),e._proxyInstance}}function de(e){return{types:[{name:"formly-group",component:te},{name:"formly-template",component:ie}],extensions:[{name:"core",extension:new ce(e),priority:-250},{name:"field-validation",extension:new le(e),priority:-200},{name:"field-form",extension:new ae,priority:-150},{name:"field-expression",extension:new oe,priority:-100}]}}class ue{constructor(e,t=[]){t&&t.forEach((t=>e.addConfig(t)))}static forRoot(e={}){return{ngModule:ue,providers:[{provide:$,multi:!0,useFactory:de,deps:[B]},{provide:$,useValue:e,multi:!0},B,U]}}static forChild(e={}){return{ngModule:ue,providers:[{provide:$,multi:!0,useFactory:de,deps:[B]},{provide:$,useValue:e,multi:!0},U]}}}ue.ɵfac=function(e){return new(e||ue)(s["ɵɵinject"](B),s["ɵɵinject"]($,8))},ue.ɵmod=s["ɵɵdefineNgModule"]({type:ue,declarations:[W,J,K,X,te,ne,ie],imports:[v.CommonModule],exports:[W,J,K,X,te,ne]}),ue.ɵinj=s["ɵɵdefineInjector"]({imports:[[v.CommonModule]]}),("undefined"==typeof ngDevMode||ngDevMode)&&s["ɵsetClassMetadata"](ue,[{type:s.NgModule,args:[{declarations:[W,J,K,X,te,ne,ie],exports:[W,J,K,X,te,ne],imports:[v.CommonModule]}]}],(function(){return[{type:B},{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:[$]}]}]}),null)}}]);