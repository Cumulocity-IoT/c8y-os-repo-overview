<c8y-title>Cumulocity Opensource</c8y-title>

<c8y-action-bar-item>
  <c8y-list-display-switch
    class="form-inline"
    (onListClassChange)="listClass = $event"
  ></c8y-list-display-switch>
</c8y-action-bar-item>
<ng-template #loadingIndicator>
  <c8y-loading></c8y-loading>
</ng-template>

<div
  *ngIf="!loading; else loadingIndicator"
  class="card-group"
  [ngClass]="listClass"
>
  <div
    class="col-sm-6 col-md-4 col-lg-4 col-xs-12"
    *ngFor="let repo of repos"
  >
    <div class="card">
      <!-- <div class="card-actions">
        <div class="dropdown" dropdown>
          <button type="button" title="dropdown-toggle" dropdownToggle class="dropdown-toggle c8y-dropdown">
            <i c8yIcon="ellipsis-v"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" *dropdownMenu>
            <li>
              <button title="Edit" type="button">
                <i c8yIcon="edit"></i>
                Edit
              </button>
            </li>
            <li>
              <button title="Duplicate" type="button">
                <i c8yIcon="clone"></i>
                Duplicate
              </button>
            </li>
            <li>
              <button title="Delete" type="button">
                <i c8yIcon="delete"></i>
                Delete
              </button>
            </li>
          </ul>
        </div>
      </div> -->
      <div class="card-header separator">
        <div class="card-icon">
          <i
            class="c8y-icon-duocolor"
            c8yIcon="c8y-simulator"
          ></i>
        </div>
        <div class="d-flex flex-grow">
          <div class="flex-grow">
            <!-- <p class="card-title">{{ repo.name }}</p> -->
            <a
              class="card-title"
              target="_blank"
              [href]="repo.url"
            >
              {{ repo.name }}
            </a>
          </div>

          <a
            *ngIf="repo | installHref | async as installHrefForRepo"
            class="btn-primary btn-sm"
            title="Install"
            [routerLink]="installHrefForRepo"
          >
            Install
        </a>
        </div>
      </div>
      <div class="card-block card-column-30 m-r-0">
        <p>{{ repo.desc }}</p>
      </div>
      <div class="card-footer separator card-column-30">
        <div class="d-flex fit-w">
          <div class="card-column-30 flex-grow">
            <span class="text-label-small m-r-4">
              <i c8yIcon="star"></i>
              {{ repo.stars }}
            </span>
          </div>
          <div class="card-column-30">
            <span class="text-label-small m-r-4">
              <i c8yIcon="codefork"></i>
              {{ repo.forks || '-' }}
            </span>
          </div>
          <div class="card-column-30">
            <span class="text-label-small m-r-4">
              <i c8yIcon="clock"></i>
              {{ repo.last_updated | c8yDate }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
